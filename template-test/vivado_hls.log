
****** Vivado(TM) HLS - High-Level Synthesis from C, C++ and SystemC v2019.2 (64-bit)
  **** SW Build 2708876 on Wed Nov  6 21:39:14 MST 2019
  **** IP Build 2700528 on Thu Nov  7 00:09:20 MST 2019
    ** Copyright 1986-2019 Xilinx, Inc. All Rights Reserved.

source /vol/cc/opt/Xilinx/2019.2/Vivado/2019.2/scripts/vivado_hls/hls.tcl -notrace
INFO: [HLS 200-10] Running '/vol/cc/opt/Xilinx/2019.2/Vivado/2019.2/bin/unwrapped/lnx64.o/vivado_hls'
INFO: [HLS 200-10] For user 'umm20' on host 'ccgpu3.doc.ic.ac.uk' (Linux_x86_64 version 4.4.0-142-generic) on Fri Aug 27 22:54:21 BST 2021
INFO: [HLS 200-10] On os Ubuntu 16.04.6 LTS
INFO: [HLS 200-10] In directory '/mnt/ccnas2/bdp/umm20/attention-hls/template-test'
Sourcing Tcl script 'build_prj.tcl'
INFO: [HLS 200-10] Opening project '/mnt/ccnas2/bdp/umm20/attention-hls/template-test/myproject_prj'.
INFO: [HLS 200-10] Adding design file 'firmware/myproject.cpp' to the project
INFO: [HLS 200-10] Adding test bench file 'myproject_test.cpp' to the project
INFO: [HLS 200-10] Adding test bench file 'firmware/weights' to the project
INFO: [HLS 200-10] Adding test bench file 'tb_data' to the project
INFO: [HLS 200-10] Opening solution '/mnt/ccnas2/bdp/umm20/attention-hls/template-test/myproject_prj/solution1'.
INFO: [SYN 201-201] Setting up clock 'default' with a period of 5ns.
INFO: [HLS 200-10] Setting target device to 'xcku115-flvb2104-2-i'
INFO: [XFORM 203-101] Allowed max sub elements number after partition is 4096.
INFO: [XFORM 203-101] Allowed max sub elements number after partition is 4096.
***** C SIMULATION *****
INFO: [SIM 211-2] *************** CSIM start ***************
INFO: [SIM 211-4] CSIM will launch GCC as the compiler.
   Compiling ../../../../firmware/myproject.cpp in debug mode
   Generating csim.exe
INFO: Unable to open input/predictions file, using default input.
-0.998047 0.822266 -0.480469 0.542969 -0.09375 0.423828 -0.611328 0.960938 0.982422 0.889648 0.84082 0.996094 -0.606445 -0.37207 0.999023 -0.975586 0.875977 0.748047 0.670898 0.882812 0.726562 0.958984 0.461914 -0.0703125 -0.444336 -0.282227 0.436523 -0.178711 0.875977 -0.09375 0.595703 -0.302734 0.789062 0.0537109 -0.474609 0.0146484 0.629883 0.999023 -1 -0.798828 0.00683594 0.55957 0.856445 0.294922 0.581055 -0.185547 -0.424805 -0.282227 -0.741211 -0.723633 -0.71582 -0.510742 -1 0.994141 -0.450195 -0.549805 -0.910156 -0.998047 -0.675781 -0.46875 0.610352 0.955078 -0.480469 -0.857422 -0.392578 -0.749023 0.0380859 -0.999023 -0.711914 -1 0.982422 -0.515625 -0.591797 -0.635742 -0.958984 -0.147461 -0.959961 -0.510742 0.514648 0.139648 -0.358398 0.99707 -0.586914 -0.804688 -0.289062 -0.94043 -0.730469 -0.892578 0.999023 -1 0.411133 -0.954102 -0.948242 -0.948242 0.748047 -0.873047 0.436523 -0.898438 -0.863281 -0.905273 
INFO: Saved inference results to file: tb_data/csim_results.log
INFO: [SIM 211-1] CSim done with 0 errors.
INFO: [SIM 211-3] *************** CSIM finish ***************
***** C SIMULATION COMPLETED IN 0h0m5s *****
***** C/RTL SYNTHESIS *****
INFO: [SCHED 204-61] Option 'relax_ii_for_timing' is enabled, will increase II to preserve clock frequency constraints.
INFO: [HLS 200-10] Analyzing design file 'firmware/myproject.cpp' ... 
WARNING: [HLS 214-113] Either use an argument of the function or declare the variable inside the dataflow loop body: firmware/myproject.cpp:66:109
WARNING: [HLS 214-113] Either use an argument of the function or declare the variable inside the dataflow loop body: firmware/myproject.cpp:66:113
WARNING: [HLS 214-113] Either use an argument of the function or declare the variable inside the dataflow loop body: firmware/myproject.cpp:66:118
WARNING: [HLS 214-113] Either use an argument of the function or declare the variable inside the dataflow loop body: firmware/myproject.cpp:74:114
WARNING: [HLS 214-113] Either use an argument of the function or declare the variable inside the dataflow loop body: firmware/myproject.cpp:74:129
WARNING: [HLS 214-113] Either use an argument of the function or declare the variable inside the dataflow loop body: firmware/myproject.cpp:74:154
WARNING: [HLS 214-113] Either use an argument of the function or declare the variable inside the dataflow loop body: firmware/myproject.cpp:84:102
WARNING: [HLS 214-113] Either use an argument of the function or declare the variable inside the dataflow loop body: firmware/myproject.cpp:84:127
WARNING: [HLS 214-114] Since the only kind of statements allowed in a canonical dataflow region are variable declarations and function calls, the compiler may not be able to correctly handle the region: firmware/myproject.cpp:37:2
WARNING: [HLS 214-114] Since the only kind of statements allowed in a canonical dataflow region are variable declarations and function calls, the compiler may not be able to correctly handle the region: firmware/myproject.cpp:38:5
WARNING: [HLS 200-471] Dataflow form checks found 10 issue(s) in file firmware/myproject.cpp
INFO: [HLS 200-111] Finished Linking Time (s): cpu = 00:00:26 ; elapsed = 00:00:36 . Memory (MB): peak = 949.012 ; gain = 527.242 ; free physical = 95794 ; free virtual = 190434
INFO: [HLS 200-111] Finished Checking Pragmas Time (s): cpu = 00:00:26 ; elapsed = 00:00:36 . Memory (MB): peak = 949.012 ; gain = 527.242 ; free physical = 95794 ; free virtual = 190434
INFO: [HLS 200-10] Starting code transformations ...
INFO: [HLS 200-489] Unrolling loop 'INPUT_X' (firmware/nnet_utils/nnet_lstm.h:382) in function 'void nnet::lstm_06_025<float, float, config1_lstm2, config2_lstm2, config_x_lstm2, config_h_lstm2>(FORWARD_REFERENCE*, FORWARD_REFERENCE::weight_t*, FORWARD_REFERENCE::weight_t*, FORWARD_REFERENCE::bias_t*, FORWARD_REFERENCE*)' completely with a factor of 1.
INFO: [XFORM 203-603] Inlining function 'nnet::lstm_06_025<float, float, config1_lstm2, config2_lstm2, config_x_lstm2, config_h_lstm2>' into 'myproject' (firmware/myproject.cpp:66).
INFO: [XFORM 203-603] Inlining function 'nnet::lstm_06_025<float, float, config1_lstm4, config2_lstm4, config_x_lstm4, config_h_lstm4>' into 'myproject' (firmware/myproject.cpp:74).
INFO: [HLS 200-111] Finished Standard Transforms Time (s): cpu = 00:02:16 ; elapsed = 00:02:27 . Memory (MB): peak = 1173.020 ; gain = 751.250 ; free physical = 95480 ; free virtual = 190121
INFO: [HLS 200-10] Checking synthesizability ...
INFO: [XFORM 203-602] Inlining function 'fp_struct<double>::mantissa' into 'generic_cast_IEEE754<int, (ap_q_mode)6, double>' (/wrk/2019.2/continuous/2019_11_06_2708876/src/products/hls/hls_lib/hlsmath/include/FloatingPoint/hls_case_IEEE754.h:15) automatically.
INFO: [XFORM 203-602] Inlining function 'fp_struct<double>::expv' into 'generic_cast_IEEE754<int, (ap_q_mode)6, double>' (/wrk/2019.2/continuous/2019_11_06_2708876/src/products/hls/hls_lib/hlsmath/include/FloatingPoint/hls_case_IEEE754.h:18) automatically.
INFO: [XFORM 203-602] Inlining function 'fp_struct<double>::__signbit' into 'generic_cast_IEEE754<int, (ap_q_mode)6, double>' (/wrk/2019.2/continuous/2019_11_06_2708876/src/products/hls/hls_lib/hlsmath/include/FloatingPoint/hls_case_IEEE754.h:59) automatically.
INFO: [XFORM 203-602] Inlining function 'generic_cast_IEEE754<int, (ap_q_mode)6, double>' into 'generic_cast_IEEE754<int, double>' (/wrk/2019.2/continuous/2019_11_06_2708876/src/products/hls/hls_lib/hlsmath/include/FloatingPoint/hls_case_IEEE754.h:117) automatically.
INFO: [XFORM 203-602] Inlining function 'generic_cast_IEEE754<int, double>' into '__hls_fptosi_double_i32' (/wrk/2019.2/continuous/2019_11_06_2708876/src/products/hls/hls_lib/hlsmath/src/lib_floatconversion.cpp:55) automatically.
INFO: [XFORM 203-602] Inlining function '__hls_fptosi_double_i32' into 'nnet::dense_simple<float, float, config_x_lstm2>' (firmware/nnet_utils/nnet_dense.h:77) automatically.
INFO: [XFORM 203-602] Inlining function '__hls_fptosi_double_i32' into 'nnet::dense_simple<float, float, config_h_lstm2>' (firmware/nnet_utils/nnet_dense.h:77) automatically.
INFO: [XFORM 203-602] Inlining function 'fp_struct<float>::mantissa' into 'generic_cast_IEEE754<int, (ap_q_mode)6, float>' (/wrk/2019.2/continuous/2019_11_06_2708876/src/products/hls/hls_lib/hlsmath/include/FloatingPoint/hls_case_IEEE754.h:15) automatically.
INFO: [XFORM 203-602] Inlining function 'fp_struct<float>::expv' into 'generic_cast_IEEE754<int, (ap_q_mode)6, float>' (/wrk/2019.2/continuous/2019_11_06_2708876/src/products/hls/hls_lib/hlsmath/include/FloatingPoint/hls_case_IEEE754.h:18) automatically.
INFO: [XFORM 203-602] Inlining function 'fp_struct<float>::__signbit' into 'generic_cast_IEEE754<int, (ap_q_mode)6, float>' (/wrk/2019.2/continuous/2019_11_06_2708876/src/products/hls/hls_lib/hlsmath/include/FloatingPoint/hls_case_IEEE754.h:59) automatically.
INFO: [XFORM 203-602] Inlining function 'generic_cast_IEEE754<int, (ap_q_mode)6, float>' into 'generic_cast_IEEE754<int, float>' (/wrk/2019.2/continuous/2019_11_06_2708876/src/products/hls/hls_lib/hlsmath/include/FloatingPoint/hls_case_IEEE754.h:117) automatically.
INFO: [XFORM 203-602] Inlining function 'generic_cast_IEEE754<int, float>' into '__hls_fptosi_float_i32' (/wrk/2019.2/continuous/2019_11_06_2708876/src/products/hls/hls_lib/hlsmath/src/lib_floatconversion.cpp:51) automatically.
INFO: [XFORM 203-602] Inlining function '__hls_fptosi_float_i32' into 'nnet::sigmoid<float, float, config2_lstm2>' (firmware/nnet_utils/nnet_activation.h:169) automatically.
INFO: [XFORM 203-602] Inlining function '__hls_fptosi_double_i32' into 'nnet::lstm_tail_02<float, config1_lstm2, config2_lstm2>' (firmware/nnet_utils/nnet_lstm.h:95) automatically.
INFO: [XFORM 203-602] Inlining function '__hls_fptosi_double_i32' into 'nnet::dense_simple<float, float, config_x_lstm4>' (firmware/nnet_utils/nnet_dense.h:77) automatically.
INFO: [XFORM 203-602] Inlining function '__hls_fptosi_double_i32' into 'nnet::dense_simple<float, float, config_h_lstm4>' (firmware/nnet_utils/nnet_dense.h:77) automatically.
INFO: [XFORM 203-602] Inlining function '__hls_fptosi_float_i32' into 'nnet::sigmoid<float, float, config2_lstm4>' (firmware/nnet_utils/nnet_activation.h:169) automatically.
INFO: [XFORM 203-602] Inlining function '__hls_fptosi_double_i32' into 'nnet::lstm_tail_02<float, config1_lstm4, config2_lstm4>' (firmware/nnet_utils/nnet_lstm.h:95) automatically.
INFO: [XFORM 203-602] Inlining function '__hls_fptosi_float_i32' into 'nnet::softmax<float, float, config_softmax5>' (firmware/nnet_utils/nnet_activation.h:253) automatically.
INFO: [XFORM 203-602] Inlining function '__hls_fptosi_double_i32' into 'nnet::dense_simple<float, float, config_dense7>' (firmware/nnet_utils/nnet_dense.h:77) automatically.
INFO: [XFORM 203-602] Inlining function '__hls_fptosi_float_i32' into 'nnet::tanh<float, float, config_tanh7>' (firmware/nnet_utils/nnet_activation.h:319) automatically.
WARNING: [SYNCHK 200-23] firmware/nnet_utils/nnet_activation.h:324: variable-indexed range selection may cause suboptimal QoR.
INFO: [SYNCHK 200-10] 0 error(s), 1 warning(s).
INFO: [HLS 200-111] Finished Checking Synthesizability Time (s): cpu = 00:05:13 ; elapsed = 00:05:24 . Memory (MB): peak = 2085.023 ; gain = 1663.254 ; free physical = 94642 ; free virtual = 189284
INFO: [XFORM 203-502] Unrolling all sub-loops inside loop 'TIMESTEP' (firmware/nnet_utils/nnet_lstm.h:377) in function 'myproject' for pipelining.
INFO: [XFORM 203-502] Unrolling all sub-loops inside loop 'TIMESTEP' (firmware/nnet_utils/nnet_lstm.h:377) in function 'myproject' for pipelining.
INFO: [XFORM 203-502] Unrolling all loops for pipelining in function 'nnet::dense_simple<float, float, config_dense7>' (firmware/nnet_utils/nnet_dense.h:53).
INFO: [XFORM 203-502] Unrolling all loops for pipelining in function 'nnet::softmax<float, float, config_softmax5>' (firmware/nnet_utils/nnet_activation.h:213).
INFO: [XFORM 203-502] Unrolling all loops for pipelining in function 'nnet::lstm_tail_02<float, config1_lstm4, config2_lstm4>' (firmware/nnet_utils/nnet_lstm.h:74).
INFO: [XFORM 203-502] Unrolling all loops for pipelining in function 'nnet::hard_tanh<float, float, config2_lstm4>' (firmware/nnet_utils/nnet_activation.h:331).
INFO: [XFORM 203-502] Unrolling all loops for pipelining in function 'nnet::sigmoid<float, float, config2_lstm4>' (firmware/nnet_utils/nnet_activation.h:143).
INFO: [XFORM 203-502] Unrolling all loops for pipelining in function 'nnet::dense_simple<float, float, config_h_lstm4>' (firmware/nnet_utils/nnet_dense.h:53).
INFO: [XFORM 203-502] Unrolling all loops for pipelining in function 'nnet::dense_simple<float, float, config_x_lstm4>' (firmware/nnet_utils/nnet_dense.h:53).
INFO: [XFORM 203-502] Unrolling all loops for pipelining in function 'nnet::lstm_tail_02<float, config1_lstm2, config2_lstm2>' (firmware/nnet_utils/nnet_lstm.h:74).
INFO: [XFORM 203-502] Unrolling all loops for pipelining in function 'nnet::hard_tanh<float, float, config2_lstm2>' (firmware/nnet_utils/nnet_activation.h:331).
INFO: [XFORM 203-502] Unrolling all loops for pipelining in function 'nnet::sigmoid<float, float, config2_lstm2>' (firmware/nnet_utils/nnet_activation.h:143).
INFO: [XFORM 203-502] Unrolling all loops for pipelining in function 'nnet::dense_simple<float, float, config_h_lstm2>' (firmware/nnet_utils/nnet_dense.h:53).
INFO: [XFORM 203-502] Unrolling all loops for pipelining in function 'nnet::dense_simple<float, float, config_x_lstm2>' (firmware/nnet_utils/nnet_dense.h:53).
INFO: [HLS 200-489] Unrolling loop 'Loop-1' (firmware/nnet_utils/nnet_lstm.h:371) in function 'myproject' completely with a factor of 32.
INFO: [HLS 200-489] Unrolling loop 'GATES_SPLIT' (firmware/nnet_utils/nnet_lstm.h:392) in function 'myproject' completely with a factor of 32.
INFO: [HLS 200-489] Unrolling loop 'Loop-2.2' (firmware/nnet_utils/nnet_lstm.h:407) in function 'myproject' completely with a factor of 32.
INFO: [HLS 200-489] Unrolling loop 'Loop-3' (firmware/nnet_utils/nnet_lstm.h:371) in function 'myproject' completely with a factor of 32.
INFO: [HLS 200-489] Unrolling loop 'INPUT_X' (firmware/nnet_utils/nnet_lstm.h:382) in function 'myproject' completely with a factor of 32.
INFO: [HLS 200-489] Unrolling loop 'Loop-4.3' (firmware/nnet_utils/nnet_lstm.h:407) in function 'myproject' completely with a factor of 32.
INFO: [HLS 200-489] Unrolling loop 'Product1' (firmware/nnet_utils/nnet_dense.h:92) in function 'nnet::dense_simple<float, float, config_dense7>' completely with a factor of 64.
INFO: [HLS 200-489] Unrolling loop 'Accum1' (firmware/nnet_utils/nnet_dense.h:105) in function 'nnet::dense_simple<float, float, config_dense7>' completely with a factor of 64.
INFO: [HLS 200-489] Unrolling loop 'Loop-1' (firmware/nnet_utils/nnet_activation.h:242) in function 'nnet::softmax<float, float, config_softmax5>' completely with a factor of 100.
INFO: [HLS 200-489] Unrolling loop 'Loop-2' (firmware/nnet_utils/nnet_activation.h:246) in function 'nnet::softmax<float, float, config_softmax5>' completely with a factor of 100.
ERROR: [XFORM 203-504] Stop unrolling loop 'Loop-2' (firmware/nnet_utils/nnet_activation.h:246) in function 'nnet::softmax<float, float, config_softmax5>' because it may cause large runtime and excessive memory usage due to increase in code size. Please avoid unrolling the loop or form sub-functions for code in the loop body.
ERROR: [HLS 200-70] Pre-synthesis failed.
command 'ap_source' returned error code
    while executing
"source build_prj.tcl"
    ("uplevel" body line 1)
    invoked from within
"uplevel \#0 [list source $arg] "

INFO: [Common 17-206] Exiting vivado_hls at Fri Aug 27 23:02:39 2021...
